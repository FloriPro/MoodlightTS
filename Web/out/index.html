<!DOCTYPE html>
<html lang="de">

<head>
    <style>
        @font-face {
            font-family: 'msyi';
            src: url('msyi.ttf');
        }

        .ColorSelContainer {
            padding: 1px;
        }

        .ColorSelButton {
            width: 58px;
            height: 58px;
        }

        button {
            background-color: rgb(210, 210, 210);
            color: black;
            border: none;
            padding: 6px 11px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 18px;
            cursor: pointer;
        }

        button:hover {
            background-color: rgb(190, 190, 190);
        }
    </style>
    <meta charset="utf-8" />

    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=.25" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <title>Easy Edit HTML</title>

    <!--mqtt-->
    <script src="/mqttws31.min.js" type="text/javascript"></script>

    <!--jquery-->
    <script src="/jquery-3.6.0.min.js" type="text/javascript"></script>

    <!--spectrunm-->
    <script src="/spectrum.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="spectrum.css">

</head>

<body style="margin:0px;overflow: hidden;" oncontextmenu="return false;" onselectstart="return false;"
    ondragstart="return false;">
    <div id="pictureEdit">
        <div style="background: transparent; position: fixed; display: flex;flex-wrap: wrap;align-items: flex-start;">
            <div>
                <table style="border-collapse: collapse;">
                    <tbody id="colorSelTable">
                    </tbody>
                </table>
                <div id="multiPage">
                    <button id="arrow0" onclick="
                        if (page>0){
                            console.log(page);
                            page-=1;
                            loadPictureVal(pictureValues[page]);
                        }"> ⬅
                    </button>
                    <button id="arrow1" onclick="
                        if (page<pictureValues.length-1){
                            console.log(page);
                            page+=1;
                            loadPictureVal(pictureValues[page]);
                        }">
                        ➡
                    </button><br>
                    <button
                        onclick="pictureValues.splice(page+1,0,pictureString2Value('000000'.repeat(moodLightSizeX*moodLightSizeY)));page++;loadPictureVal(pictureValues[page]);">Seite
                        Hinzufügen</button>
                    <button
                        onclick="pictureValues=removeItem(pictureValues,page);if(page==pictureValues.length){page--;}if(pictureValues.length==0){pictureValues.push(pictureString2Value('000000'.repeat(moodLightSizeX*moodLightSizeY)));page=0;}loadPictureVal(pictureValues[page]);">Seite
                        Löschen</button>
                    <h3 id="pageTeller">Seite X/X</h3>
                </div>
            </div>
            <div>
                <!--Colorpicker-->
                <div>
                    <input onclick="return true;" type="text" value="#ff0000" id="color" placeholder="HEX Farbe"
                        onchange='colorPicker.spectrum("set", this.value);'><br>

                    <input id='colorpicker' />
                    <script>
                        $("#colorpicker").spectrum({
                            color: "#ff0000",
                            preferredFormat: "hex",
                            showInitial: true,
                            showAlpha: false,
                            flat: true,
                            showButtons: false,
                            change: function (color) { document.getElementById("color").value = color; },
                            move: function (color) { document.getElementById("color").value = color; },
                            //showInput: true,
                        });
                    </script>
                </div>

                <!--Buttons-->
                <div>
                    <button
                        onclick='send(rgb2hex(colorPicker.spectrum("get")._r, colorPicker.spectrum("get")._g, colorPicker.spectrum("get")._b).repeat(moodLightSizeX*moodLightSizeY));'>Farbe
                        Ausprobieren</button><br>
                    <button onclick="send(pictureValue2String(pictureValues[page]));">Bild Anzeigen</button><br>
                    <button onclick="waitingForMQTTPic=true;send('&');">Bild von Moodlight Laden</button><br>
                    <!--<label name="autoSend">Automatisch Bild senden</label>
                    <input type="checkbox" name="autoSend"><br>-->

                    <br>

                    <button onclick="send('L--');">Animation auf Moodlight Stoppen</button><br>
                    <button onclick="compileAnimation(pictureValues,10,0);">Animation auf Moodlight Laden</button><br>

                    <br>

                    <button onclick="alert('WIP use key c / v')">Speichern</button><br>
                    <button onclick="alert('WIP use key c / v')">Laden</button><br>

                    <br>

                    <button onclick="finishPicture();">Fertig</button>
                </div>
            </div>
        </div>
    </div>

    <canvas id="canvas" style="cursor:default; margin:0px; height:100%; width:100%;">Jo, dein Browser is echt
        schei*e</canvas>
    <div id="hider"
        style="position:absolute;z-index:100;left:0%;top:0;background: white;width: 100%;height: 100%; opacity: 0%;pointer-events: none">
    </div>

    <input type="file" id="projectLoader" name="projectLoader" accept=".moproj" style="display: none;">
</body>

<!--main script-->
<script src="main.js?v=0.004"></script>
<script src="utilitys.js"></script>
<script src="compiler.js"></script>
<script>(function(global){var startY=0;var enabled=false;var supportsPassiveOption=false;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassiveOption=true}});window.addEventListener("test",null,opts)}catch(e){}var handleTouchmove=function(evt){var el=evt.target;var zoom=window.innerWidth/window.document.documentElement.clientWidth;if(evt.touches.length>1||zoom!==1){return}while(el!==document.body&&el!==document){var style=window.getComputedStyle(el);if(!style){break}if(el.nodeName==="INPUT"&&el.getAttribute("type")==="range"){return}var scrolling=style.getPropertyValue("-webkit-overflow-scrolling");var overflowY=style.getPropertyValue("overflow-y");var height=parseInt(style.getPropertyValue("height"),10);var isScrollable=scrolling==="touch"&&(overflowY==="auto"||overflowY==="scroll");var canScroll=el.scrollHeight>el.offsetHeight;if(isScrollable&&canScroll){var curY=evt.touches?evt.touches[0].screenY:evt.screenY;var isAtTop=startY<=curY&&el.scrollTop===0;var isAtBottom=startY>=curY&&el.scrollHeight-el.scrollTop===height;if(isAtTop||isAtBottom){evt.preventDefault()}return}el=el.parentNode}evt.preventDefault()};var handleTouchstart=function(evt){startY=evt.touches?evt.touches[0].screenY:evt.screenY};var enable=function(){window.addEventListener("touchstart",handleTouchstart,supportsPassiveOption?{passive:false}:false);window.addEventListener("touchmove",handleTouchmove,supportsPassiveOption?{passive:false}:false);enabled=true};var disable=function(){window.removeEventListener("touchstart",handleTouchstart,false);window.removeEventListener("touchmove",handleTouchmove,false);enabled=false};var isEnabled=function(){return enabled};var testDiv=document.createElement("div");document.documentElement.appendChild(testDiv);testDiv.style.WebkitOverflowScrolling="touch";var scrollSupport="getComputedStyle"in window&&window.getComputedStyle(testDiv)["-webkit-overflow-scrolling"]==="touch";document.documentElement.removeChild(testDiv);if(scrollSupport){enable()}var iNoBounce={enable:enable,disable:disable,isEnabled:isEnabled};if(typeof module!=="undefined"&&module.exports){module.exports=iNoBounce}if(typeof global.define==="function"){(function(define){define("iNoBounce",[],function(){return iNoBounce})})(global.define)}else{global.iNoBounce=iNoBounce}})(this);</script>

</html>